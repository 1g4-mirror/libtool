#! /bin/sh

# helps bootstrapping libtool, when checked out from CVS
# requires GNU autoconf and GNU automake

file=Makefile.in

rm -f acinclude.m4
ln -s libtool.m4 acinclude.m4
# fake the libtool scripts
touch ltmain.sh
touch ltconfig
touch libtoolize
aclocal
automake --gnu --add-missing --copy
sed 's/ ltconfig//' < $file > ${file}T && mv ${file}T $file || rm -f ${file}T
autoconf

for sub in libltdl demo depdemo mdemo cdemo; do
  cd $sub
  rm -f acinclude.m4
  cat ../libtool.m4 > acinclude.m4
  test "$sub" = libltdl && cat ../ltdl.m4 >> acinclude.m4
  aclocal
  test "$sub" = libltdl && autoheader
  automake --gnits --add-missing
  sed 's/ ltconfig//' < $file > ${file}T && mv ${file}T $file || rm -f ${file}T
  autoconf
  cd ..
done

rm -f ltmain.sh ltconfig libtoolize

exit 0
