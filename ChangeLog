2009-02-01  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix sed script portability issue in func_version.
	* libltdl/config/getopt.m4sh (func_version): Remove space in
	`/\./! {' sed command, to please HP-UX sed.

2009-01-31  Jeff Squyres <jsquyres@cisco.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	New test for bogus lt_dlopen error message.
	* tests/lt_dlopen.at (lt_dlopen error messages): New file, new
	test, marked as XFAIL for now.
	* Makefile.am: Adjust.
	Report and reproducible test case by Jeff Squyres.

2009-01-31  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	execute mode: do not transform *.lo or *.la arguments.
	* libltdl/config/ltmain.m4sh (func_mode_execute): Do not check
	arguments matching *.lo or *.la for script wrappers.
	* tests/execute-mode.at (execute mode): Add tests.
	* NEWS, THANKS: Update.
	Report by Paul Biggar.

	Nonexistent `main' does not guarantee link failure.
	* tests/fail.at (Failure tests): Use an unresolved symbol,
	rather than non-presence of `main', to provoke a link failure
	also on QNX.  Only check for failure of the libtool script if
	the link without libtool would have failed, too.
	Report by Mike Gorchak.

	Use AT_CHECK more liberally in duplicate members test.
	* tests/duplicate_members.at (duplicate members in archive
	tests): Wrap link commands in AT_CHECK, they might fail, as seen
	on QNX.
	* THANKS: Update.
	Report by Mike Gorchak.

2009-01-30  Akim Demaille  <demaille@gostai.com>

	Fix cwrapper warnings from MSVC 2005.
	* libltdl/config/ltmain.m4sh (func_emit_cwrapperexe_src)
	[file scope]: define _CRT_SECURE_NO_DEPRECATE.

2009-01-29  Akim Demaille  <demaille@gostai.com>

	Fix bootstrap with older libtool.m4 in reach of aclocal.
	* libltdl/m4/lt~obsolete.m4: Add stub definitions for
	_LT_REQUIRED_DARWIN_CHECKS and _LT_AC_PROG_CXXCPP.

	Fix func_exec_init.
	* tests/defs.m4sh (func_exec_init): Instead of using the undefined
	my_dir, call func_dirname_and_basename and use its result.
	(func_make): For consistency, don't use the useless local variable
	my_dir.

2009-01-29  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Document --mode short-hands better, and test them.
	* doc/libtool.texi (Invoking libtool): Give examples for using
	the `--mode=MODE' short-hand `MODE', or abbreviations thereof.
	* libltdl/config/ltmain.m4sh: Mention the short-hand for MODE
	in the --help output.
	* tests/help.at (mode short-hands): New test group.
	Suggestion by Bruno Haible.

	func_version copes with multi-line copyright headers.
	* libltdl/config/getopt.m4sh (func_version): Slurp in copyright
	lines until a period is found.
	* libltdl/config/ltmain.m4sh: Multi-line copyright is ok to use
	now.
	* tests/help.at (standard command line options): New file, new
	tests.  Make this test group the first one for libtool tests,
	moving the banner ...
	* tests/duplicate_members.at: ... from here.
	* Makefile.am (TESTSUITE_AT): Add tests/help.at.

2009-01-29  Akim Demaille  <demaille@gostai.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Normalize compiler output due to compiler wrappers.
	* tests/testsuite.at (LT_AT_NORMALIZE_COMPILER_OUTPUT): New
	macro, to normalize ccache and distcc output.
	* tests/localization.at (localized compiler messages): Use it.

2009-01-29  Peter Rosin  <peda@lysator.liu.se>

	Make modified libtool script in cwrapper test executable
	* tests/cwrapper.at: Make modified libtool script executable.
	Report by Roumen Petrov.

2009-01-28  Akim Demaille  <demaille@gostai.com>

	Clean space uses.
	* libtoolize.m4sh: Remove trailing spaces.
	Use <tab><sp>, as some editors remove "useless" spaces in
	<sp><tab>.

2009-01-26  Peter Rosin  <peda@lysator.liu.se>

	AWK is required, make sure it is set.
	* libltdl/m4/libtool.m4 (_LT_CMD_GLOBAL_SYMBOLS: Make sure
	AWK is set (automake brings it in, but is not always used).
	Fixes old-m4-iface.at on MSYS/MSVC.

2009-01-25  Mike Frysinger  <vapier@gentoo.org>

	Fix typo in libtool install mode documentation.
	* libltdl/config/ltmain.m4sh (func_mode_help): Change -inst-prefix
	to -inst-prefix-dir.
	* doc/libtool.texi (Install mode): Likewise.

2009-01-24  Charles Wilson  <libtool@cwilson.fastmail.fm>

	Add -Wall to cwrapper tests.
	* tests/cwrapper.at: Add -Wall existing tests. Add additional
	round of tests with -Wall alone.

2009-01-24  Charles Wilson  <libtool@cwilson.fastmail.fm>

	[cygwin|mingw] cwrapper cleanups.
	* libltdl/config/ltmain.m4sh (func_emit_cwrapperexe_src)
	[file scope]: re-organized includes and portability
	macros. Avoid oldnames on MINGW32 and MSVC for
	setmode/stat/chmod/getcwd/putenv. Declare _putenv on
	MINGW32 when -ansi. Use namespaced macro LT_DEBUGWRAPPER.

2009-01-24  Peter Rosin  <peda@lysator.liu.se>

	Expand exit status test in LT_AT_NOINST_EXEC_CHECK correctly
	* tests/testsuite.at (LT_AT_NOINST_EXEC_CHECK): STATUS is
	argument $3, not $2.

2009-01-23  Charles Wilson  <libtool@cwilson.fastmail.fm>

	Add tests for cwrapper with -std=c89 and -std=c99
	* tests/cwrapper.at: New file.
	* Makefile.am: Add tests/cwrapper.at.

2009-01-22  Peter Rosin  <peda@lysator.liu.se>

	Unify line endings in localization test.
	* tests/testsuite.at: Update copyright year.
	(LT_AT_UNIFY_NL): Add macro that unifies line endings on
	platforms that suffer from such confusion.
	* tests/localization.at: Use it. Update copyright year. Fixes
	the test on MSYS/MSVC.

2009-01-21  Charles Wilson  <libtool@cwilson.fastmail.fm>

	[cygwin|mingw] Fix compile warnings when -std=c89.
	* libltdl/config/ltmain.m4sh (func_emit_wrapper_part1):
	move contents to...
	(func_emit_wrapper_part2): move contents to...
	(func_emit_wrapper): here.
	(func_emit_cwrapperexe_src) [file scope]: Remove
	variables script_text_part1 and script_text_part2.
	(func_emit_cwrapperexe_src) [lt_dump_script]: New function.
	(func_emit_cwrapperexe_src) [main]: Call it.

2009-01-21  Charles Wilson  <libtool@cwilson.fastmail.fm>

	Minor cygwin cleanup
	* libltdl/config/ltmain.m4sh (func_generate_dlsyms): Correct
	case pattern for cygwin.

2009-01-19  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Avoid failure due to Cygwin path detection bug.
	* tests/execute-mode.at (execute mode): Ignore noise on stderr;
	Cygwin might consider `d\"e' to be a DOS-style path and warn.
	Report by Charles Wilson.

2009-01-19  Robert Millan  <rmh@aybabtu.com>

	Support GNU/kOpenSolaris.
	* libltdl/m4/libtool.m4 (_LT_SYS_DYNAMIC_LINKER)
	(_LT_CHECK_MAGIC_METHOD, _LT_COMPILER_PIC, _LT_LINKER_SHLIBS)
	(_LT_LANG_CXX_CONFIG) [kopensolaris*-gnu]: Recognize
	GNU/kOpenSolaris.
	* libltdl/m4/ltdl.m4 (LT_SYS_DLOPEN_DEPLIBS): Likewise.
	* NEWS, THANKS: Update.

2009-01-19  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Another LT_AT_EXEC_CHECK fixup.
	* tests/shlibpath.at (shlibpath_overrides_runpath): Use
	LT_AT_EXEC_CHECK instead of AT_CHECK.

2009-01-19  Roumen Petrov  <bugtrack@roumenpetrov.info>  (tiny change)

	Add missing $EXEEXT to java test.
	* tests/convenience.at (Java convenience archives): Add $EXEEXT.

2009-01-19  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Bump copyright years.
	* ChangeLog.2008: New, rotated from ...
	* ChangeLog: ... here.
	* Makefile.am (EXTRA_DIST): Add ChangeLog.2008.
	* NEWS, libltdl/config/ltmain.m4sh: Bump copyright years.
	* libltdl/m4/libtool.m4 (_LT_COPYING, LT_OUTPUT): Likewise.
	* libtoolize.m4sh: Likewise.

2009-01-14  Peter Rosin  <peda@lysator.liu.se>

	Fix flakey mdemo-dryrun test on MSYS (again!)
	* tests/mdemo-dryrun.test: ls -l in MSYS sometimes shows year,
	not time, for really fresh files. Add sleep 1 call at yet another
	strategic position. Makes the test pass reliably for MSYS/MinGW.

Continued in ChangeLog.2008

vim:tw=72
