2007-02-19  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/template.at: Reformat, add M4 quoting.  Use $LDFLAGS
	consistently for link mode.

2007-02-18  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/static.at: Use the right names for the broken libs.

2007-02-17  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/deplibs-ident.at [aix, hppa*-*-hpux*, interix, openbsd]:
	Do not XFAIL, on these systems we happen to pass.
	* tests/duplicate_deps.at [aix]: Likewise.

	* libltdl/m4/libtool.m4 (_LT_SYS_DYNAMIC_LINKER) [ linux |
	k*bsd*-gnu ]: Fix eval quoting in the DT_RUNPATH test.

	* HACKING: Update.

	* libltdl/m4/libtool.m4 (_LT_LINKER_SHLIBS) [ linux ]
	<whole_archive_flag_spec>: For Sun C/C++ 5.9, do not add
	/dev/null as dummy object, it fails with GNU ld version
	2.16.91.0.7-amd-sles9.  Report by Terry D. Dontje.
	* THANKS: Update.

2007-02-14  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/m4/libtool.m4 (_LT_LINKER_SHLIBS) [ osf4, osf5 ]
	<archive_expsym_cmds>: Use `${wl}-input' not `-input', for
	cc.  Could use `-input_to_ld'.
	(_LT_LANG_CXX_CONFIG) [ osf4, osf5 ] <archive_expsym_cmds>:
	Use `${wl}' instead of `-Wl,', for consistency.

2007-02-12  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix spurious testsuite failures on AIX due on NFS mounts due to
	shared library images that cannot be removed without `slibclean'
	which needs superuser privileges.

	* tests/testsuite.at (PREPARE_TESTS): Define $mkdir_p globally.
	(LT_AT_MVDIR): New macro to emulate `mv dir dest'.
	* tests/destdir.at: Use LT_AT_MVDIR.
	* tests/shlibpath.at: Likewise.
	* tests/static.at: Likewise.

2007-02-12  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/export.at: Exporting is not fully functional with
	-retain-symbols-file.  Do not test for failure to link `broken'
	in this case.  At the end of the test, SKIP if we are not fully
	functional.

	* tests/lt_dlexit.at: Add casts and `extern "C"' to let the test
	pass with a C++ compiler.

	* libltdl/config/ltmain.m4sh: Remove duplicate marker for
	generated shell functions.

	* tests/testsuite.at (LT_AT_NOINST_EXEC_CHECK): New macro, like
	LT_AT_EXEC_CHECK but uses `$LIBTOOL --mode=execute' and allows
	to pass `-dlopen MODULE' arguments.
	* tests/lt_dlexit.at: Use it.  Also, do not test `-dlpreopen',
	that currently needs library names to begin with `lib'.

2007-02-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/export.at: New test: expose -export-symbols failure
	when the input consists solely of convenience archives, and
	failure to not export all symbols when the command line length
	is exceeded.
	* Makefile.am: Adjust.

	* libltdl/m4/libtool.m4 (_LT_PROG_XSI_SHELLFNS): New substituted
	function `func_lo2o', saving two fork&exec with XSI shells.
	* libltdl/config/ltmain.m4sh (func_mode_compile)
	(func_mode_install, func_mode_link): Use it for rewrites of
	single files.

	* libltdl/m4/libtool.m4 (_LT_PROG_XSI_SHELLFNS): New function
	func_opt_split, for XSI and portable shell.
	* libltdl/config/ltmain.m4sh: Move the insertion point for the
	configure-generated shell functions to before the first option
	parsing loop.  Rewrite the separation of the long options to use
	func_opt_split.

2007-02-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Eliminate roughly a third of the script execution time overhead
	for all modes except for link/relink and uninstall/clean.

	* libltdl/m4/libtool.m4 (_LT_CONFIG): Remove unused `TEST SUITE
	MARKER', obsolete since 2005-04-17.
	* libltdl/config/ltmain.m4sh: Likewise, several instances.
	(Main): Tear apart, moving individual bits up as early in the
	script as possible, to help the shell to avoid parsing the rest.

2007-02-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* doc/libtool.texi: Update copyright years.

2007-02-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/config/general.m4sh (sed_double_backslash): Replace
	POSIX sed script with a hack that treats up to 10 backslashes
	in the input correctly and is portable to Solaris /bin/sed.

2007-02-08  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/testsuite.at (LT_AT_TAG): Skip also if the compiler
	variable is set to `no', not only if it is empty.

2007-02-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/lt_dlexit.at: Do not compile main object with libtool.

	* tests/cmdline_wrap.at: Pass $abs_top_srcdir and $abs_builddir
	to inner testsuite.

	* Makefile.am (TESTSUITE_AT): Move destdir.at after
	search-path.at so the banners fit better.

	* tests/convenience.at: Use $CPPFLAGS for compilation.
	* tests/deplibs-ident.at: Likewise.
	* tests/duplicate_members.at: Likewise.
	* tests/inherited_flags.at: Likewise.
	* tests/link-order.at: Likewise.
	* tests/stresstest.at: Likewise.
	* tests/early-libtool.at: Likewise.  Do not quote $CC.

	* libltdl/ltdl.c (lt_dlexit): Add casts to fix compilation with
	C++ compiler again.

	* tests/destdir.at: Add `libtool' keyword to tests.

2007-02-05  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/m4/libtool.m4 (_LT_COMPILER_BOILERPLATE)
	(_LT_LINKER_BOILERPLATE, _LT_SYS_MODULE_PATH_AIX)
	(_LT_COMPILER_C_O): Require _LT_DECL_SED.
	* THANKS: Update.
	Report by Maciej W. Rozycki.

2007-01-29  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* tests/lt_dlexit.at: Use $abs_top_srcdir, not $top_srcdir,
	in the new testsuite.

2007-01-29  Samuel Thibault <samuel.thibault@ens-lyon.org>

	* libltdl/m4/libtool.m4 (_LT_LINKER_SHLIBS) [ gnu ]
	<archive_expsym_cmds>: Behave like Linux, so that
	--version-script is used for Hurd as well.

2007-01-28  Charles Wilson  <libtool@cwilson.fastmail.fm>

	* NEWS: Update for Cygwin changes.

2007-01-28  Brian W. Barrett <bbarrett@lanl.gov>

	* libltdl/config/ltmain.m4sh [darwin]: Use otool64 if otool fails.

2007-01-28  Dave Brolley  <brolley@redhat.com>,
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/ltdl.c (lt_dlexit): Make sure that 'cur' is not NULL
	before checking that it is still in the list.
	* tests/lt_dlexit.at: New test.
	* Makefile.am (TESTSUITE_AT): Adjust.
	(check-local): Also depend on libltdl/libltdlc.la.
	(check-recursive): Removed, unnecessary use of Automake
	internals.

2007-01-28  Mike Frysinger  <vapier@gentoo.org>

	* libltdl/config/ltmain.m4sh (func_mode_link): Pass through
	`-p' and `-fprofile-*' for GCC.

2007-01-28  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/libltdl/lt_system.h: Adjust copyright years.

2007-01-28  Charles Wilson  <libtool@cwilson.fastmail.fm>

	* libltdl/libltdl/lt__private.h (LT_GLOBAL_DATA) [__CYGWIN__]:
	Also define on Cygwin.
	* libltdl/libltdl/lt_system.h (LT_SCOPE) [__CYGWIN__]: Likewise.

2007-01-28  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/m4/libtool.m4 (_LT_LINKER_SHLIBS) [ cygwin, mingw ]
	<export_symbols_cmds>: Avoid shell expansion of '/s/.*' through
	double expansion, in case there is a 'S:' drive.
	Report by Charles Wilson.

2007-01-28  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Introduce a new test keyword `recursive' for tests that create a
	modified `libtool' script and run the suite on this script.  All
	tests with the keyword `libtool' are (by definition) suitable to
	be used here.

	* tests/cmdline_wrap.at: New test.
	* Makefile.am: Adjust.
	* tests/testsuite.at (LT_ESCAPE): New macro: clone of Autoconf
	AS_ESCAPE that does not escape `$'.
	(LT_AT_CHECK): New macro: print a command-to-be-run while
	expanding parameters but nothing else.
	* tests/stresstest.at: Use LT_AT_CHECK.  Create some files to
	expose erroneous globbing errors with `-export-symbols-regex',
	similar to those reported by Charles Wilson.  Use `eval' and
	adjusted quoting so the expansion doesn't already happen in the
	testsuite commands.
	* HACKING: Update.

2007-01-27  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Assume C89 for included headers, and throughout the testsuite.

	* NEWS: Update.
	* libltdl/argz.c: Do not include strings.h nor memory.h, include
	string.h unconditionally.
	Patch by Simon Josefsson <jas@extundo.com>.
	* libltdl/libltdl/lt__private.h: Likewise.
	* libltdl/m4/ltdl.m4 (LTDL_INIT): Do not check for string.h,
	strings.h, memory.h.
	* tests/cdemo/configure.ac: Assume presence of math.h.
	* tests/cdemo/foo.c: Likewise.
	* tests/demo/configure.ac: Likewise for math.h, string.h.
	Assume 'const'.  Drop obsolete AC_EXEEXT.
	* tests/demo/dlmain.c: Likewise.
	* tests/demo/foo.c: Likewise.
	* tests/depdemo/configure.ac: Likewise.
	* tests/depdemo/l4/l4.c: Likewise.
	* tests/f77demo/configure.ac: Likewise.  Also drop obsolete
	AC_OBJEXT.
	* tests/fcdemo/configure.ac: Likewise.
	* tests/mdemo/configure.ac: Likewise.
	* tests/mdemo/foo1.c: Likewise.
	* tests/mdemo/foo2.c: Likewise.
	* tests/mdemo2/configure.ac: Likewise.
	* tests/pdemo/configure.ac: Likewise.
	* tests/pdemo/longer_file_name_dlmain.c:
	* tests/pdemo/longer_file_name_foo.c: Likewise.
	* tests/pdemo/longer_file_name_foo2.c: Likewise.
	* tests/tagdemo/configure.ac: Likewise.
	* tests/tagdemo/foo.cpp: Likewise.

2007-01-24  Reuben Thomas <rrt@sc3d.org>  (tiny change)

	* doc/libtool.texi (Inter-library dependencies): Fix typo.

2007-01-21  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* libltdl/m4/libtool.m4 (_LT_LINKER_SHLIBS) [cygwin, mingw]:
	Use `lib -OUT' rather than `lib /OUT' to avoid MSYS path
	translation mangling.  Report by Christopher Hulbert.
	* THANKS: Update.

	* libltdl/config/ltmain.m4sh (func_mode_compile): Accept
	suffixes matching `[fF][09].', for Fortran.
	* tests/suffix.test: Also test F90, F95, f03, F03.

	* Makefile.am (EXTRA_DIST): Add ChangeLog.2006.
	* ChangeLog.2006: New, rotated, from...
	* ChangeLog: ...here.

2007-01-21  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	* doc/libtool.texi: Typo fixes.
	* TODO: Likewise.

Continued in ChangeLog.2006

	$Revision$ $Date$

vim:tw=72
